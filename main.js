(()=>{var t={3162:function(t,e,i){var n;void 0===(n=function(){"use strict";function e(t,e,i){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){a(n.response,e,i)},n.onerror=function(){console.error("could not download file")},n.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i.g&&i.g.global===i.g?i.g:void 0,s=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,i,s){var a=r.URL||r.webkitURL,h=document.createElement("a");i=i||t.name||"download",h.download=i,h.rel="noopener","string"==typeof t?(h.href=t,h.origin===location.origin?o(h):n(h.href)?e(t,i,s):o(h,h.target="_blank")):(h.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(h.href)}),4e4),setTimeout((function(){o(h)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,r){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,r),i);else if(n(t))e(t,i,r);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){o(s)}))}}:function(t,i,n,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,n);var a="application/octet-stream"===t.type,h=/constructor/i.test(r.HTMLElement)||r.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&h||s)&&"undefined"!=typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},l.readAsDataURL(t)}else{var d=r.URL||r.webkitURL,u=d.createObjectURL(t);o?o.location=u:location.href=u,o=null,setTimeout((function(){d.revokeObjectURL(u)}),4e4)}});r.saveAs=a.saveAs=a,t.exports=a}.apply(e,[]))||(t.exports=n)}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t=i(3162);function e(t){return Math.floor(Math.random()*Math.floor(t))}class n extends Error{constructor(t){super(t)}}new WeakMap;var o,r,s=function(t,e,i,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(t,i):o?o.value=i:e.set(t,i),i},a=function(t,e,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(t):n?n.value:e.get(t)};const h=t=>(t+1>>>1)-1,c=t=>1+(t<<1),l=t=>t+1<<1;class d{constructor(t=((t,e)=>e>t?1:-1)){o.set(this,void 0),r.set(this,void 0),s(this,o,[],"f"),s(this,r,t,"f")}size(){return a(this,o,"f").length}isEmpty(){return 0===this.size()}peek(){return a(this,o,"f")[0]}push(...t){return t.forEach((t=>{a(this,o,"f").push(t),this._siftUp()})),this.size()}pop(){const t=this.peek(),e=this.size()-1;return e>0&&this._swap(0,e),a(this,o,"f").pop(),this._siftDown(),t}replace(t){const e=this.peek();return a(this,o,"f")[0]=t,this._siftDown(),e}_greater(t,e){return a(this,r,"f").call(this,a(this,o,"f")[t],a(this,o,"f")[e])>0}_swap(t,e){[a(this,o,"f")[t],a(this,o,"f")[e]]=[a(this,o,"f")[e],a(this,o,"f")[t]]}_siftUp(){let t=this.size()-1;for(;t>0&&this._greater(t,h(t));)this._swap(t,h(t)),t=h(t)}_siftDown(){let t=0;for(;c(t)<this.size()&&this._greater(c(t),t)||l(t)<this.size()&&this._greater(l(t),t);){const e=l(t)<this.size()&&this._greater(l(t),c(t))?l(t):c(t);this._swap(t,e),t=e}}}o=new WeakMap,r=new WeakMap;const u=(()=>{let t;return{start:()=>t=0,nextNode:()=>--t,next:()=>t+Math.random()}})(),f=(()=>{let t;return{start:()=>t=0,nextNode:()=>{},next:()=>--t}})(),p=(t,e)=>({x:t,y:e});class g extends class{constructor(t,e,i){this.cellFactory=i,this.width=t,this.height=e,this._prepareGrid()}applyMask(t){const e=t[0].length,i=t.length;for(let n=0;n<i;++n){const i=t[n];for(let t=0;t<e;++t){const e=i.substring(t,t+1);"."!==e&&" "!==e&&this.remove(t,n)}}return this}_prepareGrid(){this._data=new Array(this.width*this.height);for(let t=0;t<this.width;++t)for(let e=0;e<this.height;++e)this._data[this._index(t,e)]=this.cellFactory(t,e,this)}randomCell(){const t=this._data.length;let i=e(t);for(let e=0;e<t;++e){const e=this._data[i];if(e)return e;i=(i+523)%t}!function(t,e){throw console.error(e),new n(e)}(0,"No available cell found in map, reached max iterations")}_index(t,e){return t+e*this.width}remove(t,e){this.inRange(t,e)&&(this._data[this._index(t,e)]=null)}get(t,e){return this.inRange(t,e)?this._data[this._index(t,e)]:null}inRange(t,e){return t>=0&&e>=0&&t<this.width&&e<this.height}*eachNode(){for(const t of this._data)t&&(yield t)}*getAdjacent(t){let e=0,i=-1;const n=t.x,o=t.y;for(const t of[1,2,4,8]){const r=n+e,s=o+i,a=this.get(r,s);a&&(yield[t,a]),[e,i]=[-i,e]}}}{constructor(t,e,i=p){super(t,e,i)}}const w="NE",y="NW",b="SE",m="S",v="SW",x={NE:v,N:m,NW:b,SE:y,S:"N",SW:w},k={NW:{w:1,dx:-1,dy:0},NE:{w:1,dx:1,dy:0},S:{w:1,dx:0,dy:1}},E={N:{w:1,dx:0,dy:-1},SE:{w:1,dx:1,dy:0},SW:{w:1,dx:-1,dy:0}};class S{constructor(t,e,i){this.xofst=e,this.yofst=i;const n=t,o=n/2,r=Math.sqrt(n*n-o*o);this.C=n,this.A=o,this.B=r;const s=[{x:-o,y:r},{x:0,y:0},{x:o,y:r},{x:-o,y:0},{x:o,y:0},{x:0,y:r}];this.POINTS=s,this.SEGMENTS={NW:[s[0],s[1]],N:[s[3],s[4]],NE:[s[1],s[2]],SE:[s[4],s[5]],S:[s[2],s[0]],SW:[s[5],s[3]]}}}class T{constructor(t,e,i,n){this.x=t,this.y=e,this.grid=i,this.pointingDown=t%2!=e%2,this.links={},this.points=this.pointingDown?n.POINTS.slice(3,6):n.POINTS.slice(0,3),this.dirs=this.pointingDown?E:k,this.layout=n}link(t,e,i){if(e in this.links&&console.log("WARNING: creating link that already exists: ",{dir:e,reverse:i}),!(e in this.dirs))throw new Error(`Creating link that mismatches triangle orientation: ${JSON.stringify({x:this.x,y:this.y,dir:e,reverse:i})}`);this.links[e]=t,i&&t.link(this,i)}linked(t){return t in this.links}*neighborFunc(){for(const[t,{dx:e,dy:i}]of Object.entries(this.dirs)){const n=this.x+e,o=this.y+i;if(!this.grid.inRange(n,o))continue;const r=this.grid.get(n,o);r&&(yield[t,r])}}undirectedNeighborFunc(){const t=[];for(const[e,{dx:i,dy:n}]of Object.entries(this.dirs)){if(e===m||e===b||e===v)continue;const o=this.x+i,r=this.y+n;if(!this.grid.inRange(o,r))continue;const s=this.grid.get(o,r);t.push([e,s])}return t}renderBg(t){t.fillStyle=this.color||"white",t.lineWidth=1,t.strokeStyle=t.fillStyle,t.beginPath(),t.moveTo(this.px+this.points[0].x,this.py+this.points[0].y);for(const e of this.points.slice(1))t.lineTo(this.px+e.x,this.py+e.y);t.closePath(),t.stroke(),t.fill()}render(t,e="black"){t.lineWidth=1,t.strokeStyle=e;for(const e in this.dirs){if(this.linked(e))continue;const i=this.layout.SEGMENTS[e];t.beginPath(),t.moveTo(this.px+i[0].x,this.py+i[0].y),t.lineTo(this.px+i[1].x,this.py+i[1].y),t.stroke()}}get px(){return this.layout.xofst+this.layout.A*(this.x+1)}get py(){return this.layout.yofst+this.y*this.layout.B}}function N(t,i,n,o,r){if(!t)return;const s=[[w,"N"],[w,b],[m,b],[m,v],[y,v],[y,"N"]],a=[{node:t,dir:0,ttl:o,branch:0},{node:t,dir:1,ttl:o,branch:0},{node:t,dir:2,ttl:o,branch:0},{node:t,dir:3,ttl:o,branch:0},{node:t,dir:4,ttl:o,branch:0},{node:t,dir:5,ttl:o,branch:0}];let h=o/4,c=0;for(;a.length>0;){if(h<=0){h=e(8)+3;const t=Math.min(o+2-c,e(c-4)+2),i=a.length;for(let e=0;e<i;++e){const i=a[e],n=0===i.branch?t:2;a.push({node:i.node,dir:(i.dir+1)%6,ttl:n,branch:i.branch+1}),a.push({node:i.node,dir:(i.dir+5)%6,ttl:n,branch:i.branch+1})}}h--,c++;for(let t=a.length-1;t>=0;--t){const e=a[t];e.node.color=r;const o=s[e.dir][e.node.pointingDown?1:0];let h=!1;for(const[t,r]of i(e.node))if(t===o){e.node.linked(t)||n(e.node,t,r),e.node=r,h=!0;break}e.ttl-=1,(!h||e.ttl<=0)&&a.splice(t,1)}}}class _{constructor(t,e,i,n,o){const r=new S(t,n,o);console.log({layout:r}),this.grid=new g(Math.floor(e/r.A)-2,Math.floor(i/r.B),((t,e,i)=>new T(t,e,i,r)))}openCorners(){this.grid.get(1,0).links.N=1;const t=(this.grid.width+this.grid.height)%2;this.grid.get(this.grid.width-t-1,this.grid.height-1).links.S=1}clearCenter(t,e,i,n){for(let o=e;o<e+n;++o)for(let e=t;e<t+i;++e)this.grid.remove(e,o)}run(){const t=new Map,i=(e,i,n)=>{t.has(e)?t.get(e).add(i):t.set(e,new Set([i]));const o=x[i];t.has(n)?t.get(n).add(o):t.set(n,new Set([o]))},n=function(t,i){let n=[],o=500,r=["aqua","azure","cyan","blueviolet","cornflowerblue","blue","plum","PaleTurquoise","lightblue","turquoise","violet"],s=r.length;for(;n.length<s;){let s=e(t-10)+5,a=e(i-10)+5,h=e(60)+12,c=!1;for(const t of n){let e=t.x-s,i=2*(t.y-a),n=.8*(t.size+h);if(e*e+i*i<n*n){c=!0;break}}if(c||n.push({x:s,y:a,size:h,color:r.pop()}),--o<0)break}return n}(this.grid.width,this.grid.height);for(const t of n)N(this.grid.get(t.x,t.y),(t=>[...t.neighborFunc()]),i,t.size,"white");!function(t,e,i,{maxIterations:n=0,getWeight:o=(()=>1),tiebreaker:r=u}={}){const s=new Set,a=new d(((t,e)=>e.weight-t.weight||e.tiebreaker-t.tiebreaker));r.start();const h=t=>{for(const[i,n]of e(t))a.push({src:t,dir:i,dest:n,weight:o(i,t),tiebreaker:r.next()});r.nextNode(),s.add(t)};h(t);let c=n;for(;!a.isEmpty();){const{src:t,dir:e,dest:n}=a.pop();if(l=n,s.has(l)||(i(t,e,n),h(n)),c--,0===c)break}var l}(this.grid.randomCell(),(t=>t.neighborFunc()),((t,e,i)=>{t.link(i,e,x[e])}),{getWeight:(e,i)=>t.has(i)&&t.get(i).has(e)?1:2,tiebreaker:f})}render(t,e="black"){for(const i of this.grid.eachNode())i.render(t,e)}}function A(){const t=document.body.clientWidth,e=document.body.clientHeight,i=document.getElementById("myCanvas");i.setAttribute("width",t),i.setAttribute("height",e);const n=new _(24,t-20,e-20,10,10);n.run();const o=i.getContext("2d");n.render(o,"white")}"Worker"in window?window.onload=function(){const e=document.getElementById("btnPdf"),i=new Worker("worker.js"),n=(document.getElementById("progress"),document.getElementById("overlay"));(new Date).getTimezoneOffset()>180&&(document.querySelector('input[value="LETTER"]').checked=!0);let o,r=!0;e.onclick=()=>{r&&(o=document.querySelector('input[name="paperGroup"]:checked').value||"A4",n.removeAttribute("hidden"),r=!1,i.postMessage({createPdf:{paperSize:o}}))},i.addEventListener("message",(function(e){if("result"in e.data)(0,t.saveAs)(e.data.result,`snowflake-maze-${o}.pdf`),setTimeout((()=>{n.setAttribute("hidden","true"),r=!0}),100);else{const{count:t,total:i}=e.data.progress;progress.setAttribute("max",i),progress.setAttribute("value",t)}})),A(),window.onresize=()=>A()}:document.body.innerHTML='\n\t<div class="parent"><div class="center">\n\t<h1>Browser not supported</h1>\n\t<p>\n\tPlease open this page in a more recent browser,\n\tsuch as the latest version of chrome or firefox.\n\t</p>\n\t</div></div>\n'})()})();